/* Here are our lovely colors: */
$wbGreen: #bbefce;
$wbGreenDark: #a1d0b1;
$wbBlue: #93d2d0;
$wbBlueDark: #679a98;
$wbRed: #dc6a4c;
$wbRedDark: #a7442a;

/* Change Bootstrap variables before importing */
$sansFontFamily: "Open Sans", sans-serif;
$navbarBackground: $wbGreenDark;
$navbarBackgroundHighlight: $wbGreen;

$linkColor: $wbBlueDark;
$linkColorHover: darken($wbBlue, 5%);


// Core variables and mixins
@import "bootstrap/variables"; // Modify this for custom colors, font-sizes, etc
@import "bootstrap/mixins";

// CSS Reset
@import "bootstrap/reset";

// Grid system and page structure
@import "bootstrap/scaffolding";
@import "bootstrap/grid";
@import "bootstrap/layouts";

// Base CSS
@import "bootstrap/type";
//@import "bootstrap/code";
@import "bootstrap/forms";
@import "bootstrap/tables";

// Components: common
// @import "bootstrap/sprites";
@import "bootstrap/dropdowns";
@import "bootstrap/wells";
@import "bootstrap/component-animations";
@import "bootstrap/close";

// Components: Buttons & Alerts
@import "bootstrap/buttons";
@import "bootstrap/button-groups";
@import "bootstrap/alerts"; // Note: alerts share common CSS with buttons and thus have styles in buttons.less

// Components: Nav
@import "bootstrap/navs";
@import "bootstrap/navbar";
//@import "bootstrap/breadcrumbs";
//@import "bootstrap/pagination";
//@import "bootstrap/pager";

// Components: Popovers
@import "bootstrap/modals";
@import "bootstrap/tooltip";
//@import "bootstrap/popovers";

// Components: Misc
//@import "bootstrap/thumbnails";
@import "bootstrap/labels-badges";
@import "bootstrap/progress-bars";
@import "bootstrap/accordion";
//@import "bootstrap/carousel";
//@import "bootstrap/hero-unit";

// Utility classes
@import "bootstrap/utilities"; // Has to be last to override when necessary



/* Open Sans Font as requested by @paigepauli */
@import url(http://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,600,700);

@mixin shadow-black($opacity) {
  text-shadow: 0 -1px 0 rgba(0, 0, 0, $opacity);
}

@mixin stretch($offset-top: 0, $offset-right: 0, $offset-bottom: 0, $offset-left: 0) {
  position: absolute;
  @if $offset-top { top: $offset-top; }
  @if $offset-bottom { bottom: $offset-bottom; }
  @if $offset-left { left: $offset-left; }
  @if $offset-right { right: $offset-right; }
}

$navbar_height: 40px;
$title_height: 30px;
$sidebar_width: 400px;
$sidebar_margin: 12px;
$map_height_phone: 150px;
$map_height_tablet: 260px;
$borderRadius: 7px;
$settings_menu_width: 230px;

body {
  background: url('<%= image_path("background/background-stripes.png") %>') repeat #dcdcd7;
}

a:not(.btn):hover {
  text-decoration: none;
  border-bottom: 2px dotted;
}

input {
  @include size(43px, 98%);
  margin: 0px;
  padding: 0px 1%;
  font-size: 18px;
  font-weight: 300;
  line-height: 1.3em;
  text-align: center;
  @include box-shadow(0px 2px 8px 0px rgba(0, 0, 0, 0.15) inset);
  @include placeholder(#94978C);
}

body > .container-fluid, #container {
  margin-top: $navbar_height;
  clear: both;
  overflow: auto;
}
.container-fluid {
  max-width: 900px;
  margin: auto;
}

#splash {
  @include clearfix();
}

/* HEADER STYLES */
header {
  height: 100%;
  position: relative;
  padding: 0 $sidebar_margin;
  text-transform: uppercase;
  box-sizing: border-box;
  @include box-shadow(0 2px 4px rgba(0,0,0,0.25));
  @include shadow-black(0.25);
  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
  }
  [class^="icon-"], [class*=" icon-"] {
    font-size: 18px;
  }
  .affordance {
    float: left;
    font-size: 20px;
    position: absolute;
    top: 50%;
    left: -1px;
    margin-top: -10px;
  }
}

header, .gradient, header:hover, .gradient:hover { 
  color: white; 
  @include shadow-black(0.25);
}
header.red, .gradient.red {
  border-top: 1px solid #f48668;
  border-bottom: 1px solid #762a16;
  @include gradient-vertical(#dc6a4c, #a7442a);
  background-color: #a7442a;
}
header.light-gray, .gradient.light-gray {
  border-top: 1px solid #d2d2d2;
  border-bottom: 1px solid #d2d2d2;
  @include gradient-vertical(#e1e0e0, #d2d2d2);
  background-color: darken(#d2d2d2, 1%);
}
header.gray, .gradient.gray {
  border-bottom: 1px solid #57564d;
  @include gradient-vertical(#939285, #7a796e);
  background-color: darken(#7a796e, 1%);
}
header.blue, .gradient.blue {
  border-top: 1px solid #5e9b99;
  border-bottom: 1px solid #5e9b99;
  @include gradient-vertical(#93d2d0, #679a98);
  background-color: darken(#679a98, 1%);
}
header.green, .gradient.green {
  border-top: 1px solid $wbGreenDark;
  border-bottom: 1px solid $wbGreenDark;
  @include gradient-vertical($wbGreen, $wbGreenDark);
  background-color: darken($wbGreenDark, 1%);
}
.gradient.subnav {
  position: fixed;
  z-index: 10;
  width: $sidebar_width;
  @media (max-width: 768px) {
    width: 100%;
  }
}

.cozy { padding: 10px 20px; }
.compact { padding: 5px 10px; }

////////
/* MAIN LAYOUT COMPONENTS: #TITLE, #MAP, #NAVIGATION */
////////

// title is at the top of the page with a fixed height. it contains an h3 for text
#title {
  header {
    height: $title_height;
    h3 {
      line-height: $title_height;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }
  }
}

// then comes the map. on desktop the map is absolute positioned to fill the area to the
// right of the sidebar. on phone/tablet it fits neatly between title and navigation.
#map {
  // stretch to fill the entire right side of the screen
  @include stretch($navbar_height, 0, 0, $sidebar_width);

  a:hover {
    border-bottom: none;
  }
  img {
    max-width: none;
  }

  @media (max-width: 768px) {
    // fixed height, clear absolute positioning
    @include size($map_height_tablet, 100%);
    @include stretch();
    position: relative;
  }

  @media (max-width: 480px) {
    height: $map_height_phone;
  }
}

// on desktop title and navigation fill the sidebar but no more
#title, #navigation {
  min-width: 320px;
  width: $sidebar_width;
  float: left;

  @media (max-width: 768px) {
    width: 100%;
  }
}

// requires absolute positioning for overflow scroll
$nav_height_base: $navbar_height + $title_height + 1;
#navigation {
  position: absolute;
  top: $navbar_height + $title_height + 1;
  bottom: 0;
  left: 0;
  overflow: scroll;

  @media (max-width: 768px) {
    // but on mobile it's super easy relative layout
    position: relative;
    top: 0;
  }
  @media (max-width: 480px) {
    top: $nav_height_base + $map_height_phone;
  }

  ol {
    z-index: -1;
    li {
      color: #565656;
      // height: 50px;
      border-top: 1px solid #565656 * 2;
      border-bottom: 1px solid #ababab;
      @include gradient-vertical(#e1e0e0, #d2d2d2)
    }
    li:first-child {
      border-top: 1px solid #f3f3f3;
    }
  }
  ol.itineraries, ol.trips {
    padding-top: 30px;
  }

  .itineraries, .segments, .arrivals, .routes, .trips, .stops {
    list-style: none;
    margin: 0;
    @include clearfix();
    // li:last-child  { border-bottom: none; }
  }

  // .routes { margin: $sidebar_margin; }
  .routes {
    padding-left: $sidebar_margin;
    padding-right: $sidebar_margin;
    li {
      float: left;
      margin: $sidebar_margin/2 $sidebar_margin/2 0 0;
    }
  }
  .routes.collapse.in { padding-bottom: $sidebar_margin /2 }

  .itinerary {
    margin: 0;
    border-bottom: 0;
    h4 {
      padding: 5px $sidebar_margin;
      cursor: pointer;
      small { color: lightgrey; }
    }
    .summary {
      position: absolute;
      top: 50%;
      right: 10px;
      margin-top: -14px;
    }
  }

  .trip {
    padding: 8px $sidebar_margin;
  }

  .segments { z-index: 0; }
  .segment, .arrival {
    @include clearfix();
    padding: 8px $sidebar_margin;
    // border-top: 1px dashed $tableBorder;
  }
  .segment {
    border-top: 1px solid #f3f3f3;
  }
  li.segment:last-child {
    border-bottom: 1px solid #ababab * 0.9;
  }
  .segment:hover {
    background-color: $tableBackgroundHover;
  }
  .segment .label {
    float: right;
    margin-left: 5px;
  }

  .progress-striped {

    margin: $sidebar_margin;
    .bar {
      width: 100%;
      @include gradient-striped(#86bdcf, -45deg);
    }
  }

  .timing {
    display: block;
    text-align: right;

    .label {
      display: inline-block;
      margin-bottom: 2px;
    }
    .real-time {
      display: none;
    }
  }
  .alert {
    margin: $sidebar_margin;
    strong { display:block; }
  }
  .alert:not(.show) { display: none; }
}

/*Pacifico Font setup for WhichBus */
@font-face {
  font-family: 'PacificoRegular';
  src: url('/pacifico/Pacifico-webfont.eot');
  src: url('/pacifico/Pacifico-webfont.eot?#iefix') format('embedded-opentype'), url('/pacifico/Pacifico-webfont.woff') format('woff'), url('/pacifico/Pacifico-webfont.ttf') format('truetype'), url('/pacifico/Pacifico-webfont.svg#PacificoRegular') format('svg');
  font-weight: normal;
  font-style: normal;
}

.pacifico {
  font-family: 'PacificoRegular', Arial, sans-serif;
  line-height: 2rem;
  letter-spacing: 0;
  font-weight: normal;
}

#whichbus {
  font-size: 2em;
  line-height: 1.4em;
  text-decoration: none;
  border: none;
  @include shadow-black(0.25);
}
.whichbus-nav{
  text-align: center;
  a { 
    border: none !important; 
    color: white;
    label { display: none; }
  }
  a:hover { color: #eee; }
  // group of navbar items
  .block {
    font-size: 1.8em;
    line-height: 1.3em;
    margin: 0 3px;
    a + a { margin-left: 10px; }
  }
  // position block on left or right edge of screen
  .block.right { @include stretch(3px, 0px, false, false); }
  .block.left { @include stretch(3px, false, false, 0px); }
  // style icons in navbar
  .icon {
    display: inline-block;
    @include square(34px);
    line-height: 34px;
    cursor: pointer;
    text-decoration: none;
    vertical-align: middle;
    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  }
  .icon.bus {
    // different font requires special sizing
    width: auto;
    font-size: 28px;
    line-height: 30px;
    padding-left: 5px;
    i { font-size: 22px; }
    .phone { display: none; }
    @media (max-width: 480px) { 
      .desktop { display: none; }
      .phone { display: inline; }
    }
  }

  // special directions icon has two map markers slightly offset
  #directions {
    position: relative;
    margin-left: 14px;
    .icon-map-marker { 
      z-index: 4; 
      font-size: 20px; 
    }
    .icon-map-marker:first-child {
      @include stretch(-3px, false, false, -1px);
      position: absolute;
      z-index: 2;
    }
  }
}

#menu-btn {
  margin-left:-40px;
}

#settings-button.settings.active{
  background-color:#9bd5d3;
  border-radius:5px 5px 0px 0px;
  background-position:center;
  width:34px;
  height:34px;
  z-index: 9999;
}

#settings-menu{
  display: none;
  position: fixed;
  right: 4px;
  background-color: #fff;
  z-index: 9999;
  margin-top: -5px;
  color: dimgrey;
  font-size: 1.2em;
  border-radius: 10px 5px 5px 5px;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.55);
  overflow:auto;
  width: $settings_menu_width;

  header {
    border-top: none;
    padding: 14px 16px;
    border-radius: 10px 0px 0px 0px;
    vertical-align: middle;

     h3 {
      font-size: 16px;
      line-height: 18px;
    }
  }

  #settings-search {
    background-color: #ced1d1;
    height: 15%;
    padding: 10px;
    border-bottom: 1px solid #bfbfbf;
    border-top: 1px solid #dadada;

    input {
      @include size(34px, 76%);
      font-size: 14px;
      height: 30px;
      vertical-align: top;
      box-sizing: border-box;
      margin: 0;

    }
    input::-webkit-input-placeholder {
      font-style: italic;
    }
    input:-moz-placeholder {
      font-style: italic;
    }
    input:-ms-input-placeholder {
      font-style: italic;
    }
    button {
      color: #fff;
      @include size(34px, 40px);
      padding: 5px 8px;
      margin-left: 5px;
      //@include border-radius(0 $borderRadius $borderRadius 0);
    }
  }

  .blocked {
    position: relative;
    opacity: 0.6;
    .label {
      position: absolute;
      right: 10px;
      top: 50%;
      margin-top: -8px;
    }
  }

  ul {
    list-style-type: none;
    margin: 0;
  }

  li {
    padding: 10px 20px;

    span {
      margin-left: 10px;
      font-size: 12px;
      text-transform: uppercase;
    }

    i {
      font-size: 1.4em;
      color: #bbb;
      vertical-align: middle;
    }

    // hide border on menu links
    a { border-bottom: none; }
    // show link border on interior span (just the text)
    a:hover span { border-bottom: 2px dotted; }
  }

  // put a 1px border between list items, but not on outsides
  li + li {
    border-top: 1px solid #bfbfbf;
  }

  #settings-list{
    background-color:#fff;
    border-radius: 0 0 10px 10px;

    small.label.label-info{
      margin-left:5px;
    }
  }
}

//For the black background thing
#settings-bg {
  position: fixed;
  height: 100%;
  width: 100%;
  background: rgba(0,0,0,0.5);
  z-index: 1000;
  display: none;
}

.row-fluid [class*="span"].centered {
  margin-left: auto;
  margin-right: auto;
  display: block;
  float: none;
}

.logo {
  margin-top: 30px;
  margin-bottom: 20px;
}

.directions {
  @include box-shadow(0 0 3px 1px rgba(0,0,0,0.15));
  @include border-radius(10px);
  border: 1px solid #adaca1;
  background: url('<%= image_path("background/directions.png") %>') repeat #cdcabf;

  h2 {
    font-weight: normal;
    text-align: center;
    margin: 20px auto 15px;
    color: white;
    @include shadow-black(0.20);
  }

  table {
    tr { margin-bottom: 15px; }
    tr:last-child { margin-bottom: 0; }
    td { padding: 0;}

    input.location {
      @include size(43px, 98%);
      @include border-radius($borderRadius 0 0 $borderRadius);
      border: 1px solid #adaca1;
      margin: 0;
      padding: 0 1%;
      font-size: 18px;
      line-height: 1.3em;
      vertical-align: middle;
    }
    button.geolocate {
      @include size(45px, 47px);
      margin-left: -1px;
      border: 1px solid #adaca1;
      @include border-radius(0 $borderRadius $borderRadius 0);
      font-size: 2em;
      line-height: 0;
    }
  }

  form .row-fluid {
    margin-bottom: 15px;
  }

  .input-append {
    position: relative;
    height: 45px;
    input, button {
      display: inline !important;
      float: none !important;
    }
  }

  input.location:focus {
    // border-color: rgba(82, 168, 236, 0.8);
    // @include box-shadow(0px 2px 8px 0px rgba(82, 168, 236, 0.15) inset);
  }

  .btn.btn-map {
    height: 45px;
    color: white;
    font-size: 18px;
    font-weight: 700;
    @include border-radius($borderRadius);
  }
}

.footer {
  display: none !important;  // HIDING THE LOGIN | SIGN UP FOOTER FOR NOW
  margin-top: 12px;
  margin-bottom: 15px;
  text-align: center;
  font-weight: 700;
  font-size: 14px;
  color: #666;
  a {
    text-decoration: none;
    @include shadow-black(0.25);
    color: #666;
  }
  a:hover {
    color: white;
    border-bottom: 2px white dotted;
    @include shadow-black(0.15);
  }
}

.copyright {
  padding: 15px 0 5px 5px;
  font-size: 11px;
  text-align: center;
  .copy {
    font-size: 12px;
  }
}

.favorite {
  @include size(15px, 20px);
  float: right;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  line-height: 25px;
  text-shadow: 0px -1px 5px #57564d;
}
.favorite.active, .favorite:hover {
  background: -webkit-gradient(linear, left top, left bottom, from(#dc785e), to(#c65f43));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  color: #d86749;
}

.disabled { color: #aaa; text-shadow: none; }

.trip-options {
  margin: 0;
  display: none;

  input {
    height: auto;
    font-size: inherit;
    padding: 4px 8px;
  }
}

.btn.btn-route {
  color: white;
  font-size: 16px;
  font-weight: 700;
  padding: 4px 8px;
  min-width: 30px;
  vertical-align: baseline;
  border: 1px solid #748c7d;
  @include shadow-black(0.25);
  @include gradientBar(#bfe4cd, #90b89f);
  background-color: darken(#90b89f, 1%);
}

.btn.btn-stop {
  padding: 2px 5px;
  border-bottom: none;
  vertical-align: baseline;
}

.btn.btn-go {
  font-weight: bold;
  border: 1px solid #5e9b99;
  @include shadow-black(0.25);
  @include gradientBar($wbBlue, $wbBlueDark);
  background-color: darken($wbBlueDark, 1%);
}

.leaflet-control-zoom-in {
  background-image: url('<%= image_path("vendor/leaflet/images/zoom-in.png") %>');
}
.leaflet-control-zoom-out {
  background-image: url('<%= image_path("vendor/leaflet/images/zoom-out.png") %>');
}

// nice formatting for about and issues pages
.about, .issues {
  margin: 20px auto;
  background-color:white;
  color:#707070;
  @include border-radius(15px);
  h1 {
    text-align: center;
    margin-bottom: 15px;
  }
  .content {
    margin: 15px;
  }
}

// constrain the width of the issues google form
.issues iframe {
  margin: auto;
  display: block;
  max-width: 500px;
  width: 100%;
  height: 850px;
}

// a small logo, constrained in height. used on about & issues pages
.logo-small {
  display: block;
  margin: auto;
  max-height: 110px;
  margin-top: 20px;
}

.safety .icon-warning-sign {
  color: $orange;
}

// some generic styling changes for all modals
.modal {
  background: transparent;
  .modal-header { border-radius: 6px 6px 0 0; }
  // shrink the dialog on phones so it looks nice
  @media (max-width: 480px) {
    width: 90% !important;
    max-height: 90%;
    left: 5%;
    top: 5%;
    margin: 0 !important;
    .modal-body { max-height: 200px; }
  }
}

// the modal dialog for geocode result disambiguation!
#disambiguate {
  width: 480px;
  margin-left: -240px;
  .results {
    // this is a nice little hack for a vertical btn-group:
    // 100% width blocks with border radius tricks
    .btn {
      box-sizing: border-box;
      border-radius: 0;
      display: block;
      width: 100%;
      margin: 0;
    }
    .btn:first-child { border-radius: 5px 5px 0 0; }
    .btn:last-child  { border-radius: 0 0 5px 5px; }
  }
  input {
    height: auto;
  }
  label {
    margin-bottom: 0;
  }
}

.tooltip {
  text-transform: uppercase;
  .tooltip-inner {
    background: rgba(255, 255, 255, 0.8);
    color: #333;
  }
  .tooltip-arrow { 
    border-bottom-color: rgba(255, 255, 255, 0.8) !important;
  }
}


div.popout {
  position: absolute;
  top: $navbar_height + 10px;
  right: 10px;
  width: 250px;
  .popout-content {
    padding: 15px;
    background: white;
    border-radius: 0 0 6px 6px;
    form {
      text-align: right;
      margin: 0;
      input[type=text] {
        box-sizing: border-box;
        width: 100%;
        height: auto;
        padding: 8px;
        font-size: 16px;
        line-height: auto;
      }
      .btn { width: 100%; }
    }
  }

  /* nice CSS arrow from http://cssarrowplease.com/ */
  .top-arrow {
    position: relative;
    background: #fff;
    border: 4px solid #ccc;
  }
  .top-arrow:after, .top-arrow:before {
    bottom: 100%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
  }
  .top-arrow:after {
    border-color: rgba(255, 255, 255, 0);
    border-bottom-color: #fff;
    border-width: 10px;
    left: 50%;
    margin-left: -10px;
  }
  .top-arrow:before {
    border-color: rgba(204, 204, 204, 0);
    border-bottom-color: #ccc;
    border-width: 16px;
    left: 50%;
    margin-left: -16px;
  }
}
